(this["webpackJsonpfidelija-employee"]=this["webpackJsonpfidelija-employee"]||[]).push([[0],{163:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(14),r=n.n(c),o=n(241),s=n(19),i=n(24),j=n(8),l=n.n(j),u=n(13),d=n(31),b=n.n(d),p="https://api.fidelija.com.br/",O={authenticate:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(p,"oauth/token"),t.abrupt("return",b.a.post(n,e));case 2:case"end":return t.stop()}}),t)})))()},setLoggedUser:function(e,t){return Object(u.a)(l.a.mark((function n(){var a,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=JSON.stringify(e),c=JSON.stringify(t),localStorage.setItem("userData",a),localStorage.setItem("authData",c);case 4:case"end":return n.stop()}}),n)})))()},getEmployee:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(p,"api/employee-data"),t.abrupt("return",b.a.get(n,{headers:{Authorization:"".concat(e.token_type," ").concat(e.access_token)}}));case 2:case"end":return t.stop()}}),t)})))()},getAuthData:function(){var e=localStorage.getItem("authData");if(!e)return null;try{return JSON.parse(e)}catch(t){return console.log(t),null}},getLoggedUser:function(){var e=localStorage.getItem("userData");if(!e)return null;try{return JSON.parse(e)}catch(t){return console.log(t),null}},isAuthenticated:function(){return!!localStorage.getItem("authData")},clearLoggedUser:function(){localStorage.getItem("authData")&&(localStorage.removeItem("authData"),localStorage.removeItem("userData"),window.location.replace("/"))},getUserType:function(){if(localStorage.getItem("authData")){var e=JSON.parse(localStorage.getItem("userData")),t=e.is_admin,n=e.is_employee;if(1===t)return{is_admin:!0,is_employee:!1};if(1===n)return{is_employee:!0,is_admin:!1}}},recoverPassword:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(p,"api/user/recovery"),t.abrupt("return",b.a.post(n,e));case 2:case"end":return t.stop()}}),t)})))()}},x="https://api.fidelija.com.br/",h=O.getAuthData()&&{headers:{Authorization:"".concat(O.getAuthData().token_type," ").concat(O.getAuthData().access_token)}},m={getUserByCpf:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(x,"api/user/cpf"),t.abrupt("return",b.a.post(n,e,h));case 2:case"end":return t.stop()}}),t)})))()},registerPoints:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(x,"api/points/stablishment"),t.abrupt("return",b.a.post(n,e,h));case 2:case"end":return t.stop()}}),t)})))()},getUser:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(x,"api/user/").concat(e),t.abrupt("return",b.a.get(n,h));case 2:case"end":return t.stop()}}),t)})))()},getRedeemHistory:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(x,"api/employees/redeem/history?page=").concat(e),t.abrupt("return",b.a.get(n,h));case 2:case"end":return t.stop()}}),t)})))()},getPointsHistory:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(x,"api/employees/points/history?page=").concat(e),t.abrupt("return",b.a.get(n,h));case 2:case"end":return t.stop()}}),t)})))()}},g="https://api.fidelija.com.br/",f=O.getAuthData()&&{headers:{Authorization:"".concat(O.getAuthData().token_type," ").concat(O.getAuthData().access_token)}},v={getVoucher:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(g,"api/vouchers/").concat(e),t.abrupt("return",b.a.get(n,f));case 2:case"end":return t.stop()}}),t)})))()},completeVoucher:function(e){return Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(g,"api/vouchers"),t.abrupt("return",b.a.post(n,e,f));case 2:case"end":return t.stop()}}),t)})))()}},y=n(37),w=n(72),k=n(1),C=function(e){var t=e.component,n=Object(w.a)(e,["component"]);return Object(k.jsx)(s.b,Object(y.a)(Object(y.a)({},n),{},{render:function(e){return O.isAuthenticated()?Object(k.jsx)(s.a,{to:{pathname:"/",state:{from:e.location}}}):Object(k.jsx)(t,Object(y.a)({},e))}}))},S=function(e){var t=e.component,n=Object(w.a)(e,["component"]);return Object(k.jsx)(s.b,Object(y.a)(Object(y.a)({},n),{},{render:function(e){return O.isAuthenticated()?Object(k.jsx)(t,Object(y.a)({},e)):Object(k.jsx)(s.a,{to:{pathname:"/",state:{from:e.location}}})}}))},N=n(9),D=n(221),F=n(115),P=n(49),W=n(242),_=n(208),I=n(222),B=n(223),A=n(243),E=n(197),R=n(166),M=n(200),U=Object(E.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#60c3ff"}}})),V=function(e){var t=U();return Object(k.jsx)(R.a,{className:t.backdrop,open:e.open,children:Object(k.jsx)(M.a,{color:"inherit"})})},L=n(248),T=n(246),q=function(e){return Object(k.jsx)(L.a,{open:e.toggleSnack,autoHideDuration:e.time,onClose:e.onClose,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(k.jsx)(T.a,{onClose:e.onClose,severity:e.color,variant:"filled",children:e.children})})},H=n(203),Y=n(204),z=n(202),J=n(249),K=n(111),Q=n(207),G=n(247),X=n(206),Z=n(167),$=n(210),ee=n(212),te=n(205),ne=n(209),ae=Object(E.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{marginBottom:"30px"},list:{width:250}}})),ce=n(211),re=n(213),oe=n(214),se=function(e){var t=Object(a.useState)(!1),n=Object(N.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(!1),s=Object(N.a)(o,2),j=s[0],l=s[1],u=ae(),d=Object(a.useRef)(null);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(H.a,{position:"static",className:u.appBar,children:Object(k.jsxs)(Y.a,{children:[Object(k.jsx)(z.a,{edge:"start",className:u.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return l(!0)},children:Object(k.jsx)(te.a,{})}),Object(k.jsx)(P.a,{variant:"h6",className:u.title,children:"Painel do funcion\xe1rio"}),Object(k.jsxs)("div",{children:[Object(k.jsx)(z.a,{onClick:function(){return r(!0)},ref:d,name:"Profile button",children:Object(k.jsx)(J.a,{src:"https://api.fidelija.com.br/"+O.getLoggedUser().photo,alt:"profile"})}),Object(k.jsx)(K.a,{anchorEl:d.current,open:c,onClose:function(){return r(!1)},children:Object(k.jsx)(Q.a,{component:_.a,endIcon:Object(k.jsx)(ne.a,{}),color:"secondary",onClick:function(){O.clearLoggedUser()},children:"Sair"})})]})]})}),Object(k.jsx)(G.a,{anchor:"left",open:j,onOpen:function(){return l(!0)},onClose:function(){return l(!1)},children:Object(k.jsx)("div",{className:u.list,role:"presentation",onClick:function(){return l(!1)},onKeyDown:function(){return l(!1)},children:Object(k.jsxs)(X.a,{children:[Object(k.jsxs)(Z.a,{button:!0,component:i.b,to:"/",children:[Object(k.jsx)($.a,{children:Object(k.jsx)(ce.a,{})}),Object(k.jsx)(ee.a,{children:"Hist\xf3rico"})]}),Object(k.jsxs)(Z.a,{button:!0,component:i.b,to:"/point-user",children:[Object(k.jsx)($.a,{children:Object(k.jsx)(re.a,{})}),Object(k.jsx)(ee.a,{children:"Pontuar"})]}),Object(k.jsxs)(Z.a,{button:!0,component:i.b,to:"/redeem",children:[Object(k.jsx)($.a,{children:Object(k.jsx)(oe.a,{})}),Object(k.jsx)(ee.a,{children:"Resgate de produto"})]})]})})})]})},ie=n(215),je=n(106),le=n.n(je),ue=Object(E.a)((function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}}})),de=function(){var e=ue();return Object(k.jsx)(ie.a,{className:e.fab,color:"secondary",component:i.b,to:"/reader",children:Object(k.jsx)(le.a,{})})},be=n(216),pe=n(217),Oe=n(218),xe=n(219),he=n(220),me=function(e){return Object(k.jsxs)(be.a,{open:e.open,onClose:e.close,children:[Object(k.jsx)(pe.a,{children:"Aviso"}),Object(k.jsx)(Oe.a,{children:Object(k.jsx)(xe.a,{children:e.text})}),Object(k.jsx)(he.a,{children:Object(k.jsx)(_.a,{onClick:e.close,color:"primary",children:"Continuar"})})]})},ge=Object(E.a)((function(e){return{paper:{padding:"25px",marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},logo:{margin:e.spacing(4),width:"180px"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),fe=n.p+"static/media/void.c788c571.svg",ve=n.p+"static/media/fidelija-logo.903316ba.png",ye=function(){var e=Object(a.useState)(""),t=Object(N.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(N.a)(r,2),s=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(N.a)(d,2),p=b[0],x=b[1],h=Object(a.useState)(!1),m=Object(N.a)(h,2),g=m[0],f=m[1],v=Object(a.useState)(""),y=Object(N.a)(v,2),w=y[0],C=y[1],S=ge(),E=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),t={username:n,password:s,scope:"*",client_id:1,grant_type:"password",client_secret:"IQLstf5Jhow51iiBGDxp9BPxlfMDwLvnxrsTF6n6"},e.prev=2,e.next=5,O.authenticate(t);case 5:return a=e.sent,e.next=8,O.getEmployee(a.data);case 8:if(!(c=e.sent).data.employeeInfo&&!c.data.stablishment){e.next=16;break}return e.next=12,O.setLoggedUser(c.data,a.data);case 12:x(!1),window.location.reload(),e.next=19;break;case 16:x(!1),C("Acesso n\xe3o autorizado"),f(!0);case 19:e.next=27;break;case 21:e.prev=21,e.t0=e.catch(2),console.log(e.t0),x(!1),C("Ocorreu um erro tente novamente."),f(!0);case 27:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(k.jsx)(V,{open:p}),Object(k.jsx)(q,{toggleSnack:g,time:4500,onClose:function(){return f(!1)},color:"error",children:w}),Object(k.jsxs)(F.a,{variant:"outlined",className:S.paper,children:[Object(k.jsx)("img",{src:ve,alt:"Fidelij\xe1",className:S.logo}),Object(k.jsx)(P.a,{component:"h1",variant:"h5",children:"Login de Funcion\xe1rios"}),Object(k.jsxs)("div",{className:S.form,children:[Object(k.jsx)(W.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",name:"email",type:"email",value:n,onChange:function(e){return c(e.target.value)}}),Object(k.jsx)(W.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",value:s,onChange:function(e){return j(e.target.value)}}),Object(k.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"primary",className:S.submit,onClick:function(){return E()},children:"Entrar"}),Object(k.jsx)(I.a,{container:!0,children:Object(k.jsx)(I.a,{item:!0,xs:!0,children:Object(k.jsx)(B.a,{component:i.b,to:"/recover",variant:"body2",children:"Esqueceu a senha?"})})})]})]}),Object(k.jsx)(A.a,{mt:8,children:Object(k.jsxs)(P.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(k.jsx)(B.a,{color:"inherit",href:"https://parceiro.fidelija.com.br/",children:"Fidelij\xe1"})," ",(new Date).getFullYear(),"."]})})]})},we=n(107),ke=n.n(we),Ce=n(224),Se=n(225),Ne=n(226),De=n(227),Fe=n(228),Pe=n(229),We=n(74),_e=Object(E.a)((function(e){return{button:{color:e.palette.common.white,backgroundColor:We.a[400],"&:hover":{backgroundColor:We.a[500]}},paper:{padding:"10px"},gridContainer:{marginBottom:"80px"},header:{marginBottom:"20px"}}})),Ie=function(){var e=Object(a.useState)(!1),t=Object(N.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),o=Object(N.a)(r,2),s=o[0],i=o[1],j=Object(a.useState)(""),d=Object(N.a)(j,2),b=d[0],p=d[1],x=Object(a.useState)(""),h=Object(N.a)(x,2),g=h[0],f=h[1],v=Object(a.useState)(""),w=Object(N.a)(v,2),C=w[0],S=w[1],B=Object(a.useState)(!1),A=Object(N.a)(B,2),E=A[0],R=A[1],M=Object(a.useState)(""),U=Object(N.a)(M,2),L=U[0],T=U[1],q=_e(),H=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=17;break}return c(!0),n={cpf:b},e.prev=3,e.next=6,m.getUserByCpf(n);case 6:a=e.sent,i(a.data),c(!1),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),c(!1),T("N\xe3o foi poss\xedvel encontrar o usu\xe1rio."),R(!0);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t={user_id:s.id,ammount:g,reference:C,employeeId:O.getLoggedUser().id},e.prev=2,e.next=5,m.registerPoints(t);case 5:i(null),f(""),p(""),S(""),c(!1),T("Usu\xe1rio pontuado com sucesso."),R(!0),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(2),c(!1),console.log(e.t0),T("N\xe3o foi poss\xedvel pontuar o usu\xe1rio."),R(!0);case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(se,{}),Object(k.jsx)(V,{open:n}),Object(k.jsx)(me,{open:E,close:function(){return R(!1)},text:L}),Object(k.jsxs)(D.a,{maxWidth:"lg",children:[Object(k.jsxs)("div",{className:q.header,children:[Object(k.jsx)(P.a,{variant:"h5",children:"Pontuar usu\xe1rio"}),Object(k.jsx)(Ce.a,{})]}),Object(k.jsxs)(I.a,{className:q.gridContainer,container:!0,spacing:3,direction:"column",justifyContent:"center",children:[Object(k.jsx)(I.a,{item:!0,xs:12,children:Object(k.jsxs)(F.a,{variant:"outlined",className:q.paper,children:[Object(k.jsx)(ke.a,{mask:"999.999.999-99",maskChar:"",value:b,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){return H(e)},children:function(e){return Object(k.jsx)(W.a,Object(y.a)(Object(y.a)({},e),{},{fullWidth:!0,variant:"outlined",label:"CPF",margin:"normal",type:"text"}))}}),s&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(W.a,{fullWidth:!0,type:"number",variant:"outlined",label:"Valor da compra",margin:"normal",name:"valor",value:g,onChange:function(e){return f(e.target.value)}}),Object(k.jsx)(W.a,{fullWidth:!0,variant:"outlined",label:"Refer\xeancia",margin:"normal",name:"referencia",value:C,onChange:function(e){return S(e.target.value)}})]})]})}),s&&Object(k.jsx)(I.a,{item:!0,xs:12,children:Object(k.jsxs)(F.a,{variant:"outlined",children:[Object(k.jsxs)(X.a,{dense:!1,children:[Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{src:"https://api.fidelija.com.br/"+s.photo,alt:s.name})}),Object(k.jsx)(ee.a,{children:s.name})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"#604bd2"},children:Object(k.jsx)(Ne.a,{})})}),Object(k.jsx)(ee.a,{children:s.cpf})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"#604bd2"},children:Object(k.jsx)(De.a,{})})}),Object(k.jsx)(ee.a,{children:C||"- - -"})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"#604bd2"},children:Object(k.jsx)(Fe.a,{})})}),Object(k.jsx)(ee.a,{children:s.stablishment_points||"- - -"})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"rgb(38 165 43)"},children:Object(k.jsx)(Pe.a,{})})}),Object(k.jsx)(ee.a,{children:Math.ceil(5*g)})]})]}),Object(k.jsx)("div",{style:{padding:"10px"},children:Object(k.jsx)(_.a,{className:q.button,variant:"contained",color:"inherit",fullWidth:!0,size:"medium",disabled:""===g||""===C,onClick:function(){return Y()},children:"Pontuar"})})]})})]})]}),Object(k.jsx)(de,{})]})},Be=Object(E.a)((function(e){return{button:{color:e.palette.common.white,backgroundColor:We.a[400],"&:hover":{backgroundColor:We.a[500]}},inputs:{padding:"15px"},notFound:{textAlign:"center",margin:"70px"},notFoundMsg:{marginTop:"20px",marginBottom:"20px"},paperPadding:{padding:30}}})),Ae=function(){var e=Object(a.useState)(null),t=Object(N.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(N.a)(r,2),i=o[0],j=o[1],d=Object(a.useState)(""),b=Object(N.a)(d,2),p=b[0],x=b[1],h=Object(a.useState)(!0),g=Object(N.a)(h,2),f=g[0],v=g[1],y=Object(a.useState)(!1),w=Object(N.a)(y,2),C=w[0],S=w[1],I=Object(a.useState)(""),B=Object(N.a)(I,2),A=B[0],E=B[1],R=Object(s.g)().id,M=Be();Object(a.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.getUser(R);case 3:t=e.sent,n=t.data,console.log(n),c(n),v(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),v(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[R]);var U=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),t={user_id:n.id,ammount:i,reference:p,employeeId:O.getLoggedUser().id},e.prev=2,e.next=5,m.registerPoints(t);case 5:j(""),x(""),v(!1),E("Usu\xe1rio pontuado com sucesso."),S(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),v(!1),E("N\xe3o foi possivel pontuar o usu\xe1rio."),S(!0);case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(se,{}),Object(k.jsx)(V,{open:f}),Object(k.jsx)(me,{open:C,close:function(){return S(!1)},text:A}),f||Object(k.jsx)(k.Fragment,{children:n?Object(k.jsx)(D.a,{maxWidth:"lg",children:Object(k.jsxs)(F.a,{variant:"outlined",children:[Object(k.jsxs)("div",{className:M.inputs,children:[Object(k.jsx)(W.a,{fullWidth:!0,type:"number",variant:"outlined",label:"Valor da compra",margin:"normal",name:"valor",value:i,onChange:function(e){return j(e.target.value)}}),Object(k.jsx)(W.a,{fullWidth:!0,variant:"outlined",label:"Referencia",margin:"normal",name:"referencia",value:p,onChange:function(e){return x(e.target.value)}})]}),Object(k.jsxs)(X.a,{dense:!1,children:[Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{src:"https://api.fidelija.com.br/"+n.photo,alt:n.name})}),Object(k.jsx)(ee.a,{children:n.name})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"#604bd2"},children:Object(k.jsx)(Ne.a,{})})}),Object(k.jsx)(ee.a,{children:n.cpf})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"#604bd2"},children:Object(k.jsx)(De.a,{})})}),Object(k.jsx)(ee.a,{children:p||"- - -"})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"#604bd2"},children:Object(k.jsx)(Fe.a,{})})}),Object(k.jsx)(ee.a,{children:n.stablishment_points||"- - -"})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{style:{backgroundColor:"rgb(38 165 43)"},children:Object(k.jsx)(Pe.a,{})})}),Object(k.jsx)(ee.a,{children:Math.ceil(5*i)})]})]}),Object(k.jsx)("div",{style:{padding:"10px"},children:Object(k.jsx)(_.a,{className:M.button,variant:"contained",color:"inherit",fullWidth:!0,size:"medium",disabled:""===i||""===p,onClick:function(){return U()},children:"Pontuar"})})]})}):Object(k.jsx)("div",{className:M.notFound,children:Object(k.jsxs)(D.a,{maxWidth:"lg",children:[Object(k.jsx)("img",{src:fe,width:"250",alt:"void"}),Object(k.jsx)(P.a,{variant:"h6",className:M.notFoundMsg,children:"O usu\xe1rio n\xe3o foi encontrado"})]})})}),Object(k.jsx)(de,{})]})},Ee=Object(E.a)((function(e){return{button:{color:e.palette.common.white,backgroundColor:We.a[400],"&:hover":{backgroundColor:We.a[500]}},imageContainer:{display:"flex",padding:"15px"},productPicture:{margin:"auto",border:"2px solid #bdbdbd",width:e.spacing(25),height:e.spacing(25)},notFound:{textAlign:"center",margin:"70px"},notFoundMsg:{marginTop:"20px",marginBottom:"20px"},paperPadding:{padding:30}}})),Re=n(230),Me=n(231),Ue=n(232),Ve=function(){var e=Object(a.useState)(null),t=Object(N.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),o=Object(N.a)(r,2),i=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(N.a)(d,2),p=b[0],O=b[1],x=Object(a.useState)(""),h=Object(N.a)(x,2),m=h[0],g=h[1],f=Object(s.g)().id,y=Ee();Object(a.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.getVoucher(f);case 3:t=e.sent,n=t.data,c(n),j(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[f]);var w=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),t={id:f},console.log(t),e.prev=3,e.next=6,v.completeVoucher(t);case 6:j(!1),g("Resgate concluido com sucesso."),O(!0),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),j(!1),g("N\xe3o foi possivel efetuar o resgate."),O(!0);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(se,{}),Object(k.jsx)(V,{open:i}),Object(k.jsx)(me,{open:p,close:function(){return O(!1)},text:m}),i||Object(k.jsx)(k.Fragment,{children:n?Object(k.jsx)(D.a,{maxWidth:"lg",children:Object(k.jsxs)(F.a,{variant:"outlined",children:[Object(k.jsx)("div",{className:y.imageContainer,children:Object(k.jsx)(J.a,{className:y.productPicture,src:"https://api.fidelija.com.br/"+n.product.image})}),Object(k.jsxs)(X.a,{children:[Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(Re.a,{})})}),Object(k.jsx)(ee.a,{primary:"Produto",secondary:n.product.name})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(Me.a,{})})}),Object(k.jsx)(ee.a,{primary:"Estoque",secondary:n.product.stock})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(re.a,{})})}),Object(k.jsx)(ee.a,{primary:"Valor em pontos",secondary:n.product.cost})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(Ue.a,{})})}),Object(k.jsx)(ee.a,{primary:"Validade",secondary:n.limit_date})]})]}),Object(k.jsx)("div",{style:{padding:"10px"},children:Object(k.jsx)(_.a,{className:y.button,fullWidth:!0,variant:"contained",onClick:function(){return w()},children:"Confirmar"})})]})}):Object(k.jsx)("div",{className:y.notFound,children:Object(k.jsxs)(D.a,{maxWidth:"lg",children:[Object(k.jsx)("img",{src:fe,width:"250",alt:"void"}),Object(k.jsx)(P.a,{variant:"h6",className:y.notFoundMsg,children:"O cupom inserido \xe9 inv\xe1lido ou n\xe3o existe."})]})})}),Object(k.jsx)(de,{})]})},Le=n(84),Te=n.n(Le),qe=Object(E.a)((function(e){return{paperContent:{padding:"50px",display:"flex",justifyContent:"center"},qr:{width:"100%"},header:{marginBottom:"20px"},button:{marginTop:"15px",marginBottom:"30px"}}})),He=function(){var e=Object(a.useRef)(null),t=qe();return Object(k.jsxs)("div",{children:[Object(k.jsx)(se,{}),Object(k.jsxs)(D.a,{children:[Object(k.jsxs)("div",{className:t.header,children:[Object(k.jsx)(P.a,{variant:"h5",children:"Leitor de c\xf3digo QR"}),Object(k.jsx)(Ce.a,{})]}),Object(k.jsx)(F.a,{variant:"outlined",className:t.paperContent,children:Object(k.jsx)(Te.a,{className:t.qr,delay:1e3,onError:function(e){return console.log(e)},onScan:function(e){e&&window.location.replace(e)}})}),Object(k.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.button,onClick:function(){return e.current.openImageDialog()},children:"Upload do C\xf3digo QR"}),Object(k.jsx)(Te.a,{style:{display:"none"},ref:e,delay:300,onError:function(e){return console.log(e)},onScan:function(e){return function(e){e&&window.location.replace(e)}(e)},legacyMode:!0})]})]})},Ye=n(85),ze=n.n(Ye),Je=n(110),Ke=n(244),Qe=n(233),Ge=n(235),Xe=n(234),Ze=n(236),$e=n(237),et=n(238),tt=n(239),nt=n(240),at=n(245),ct=Object(E.a)((function(e){return{paper:{padding:"6px 16px"},pagination:{display:"flex",justifyContent:"center",marginTop:"20px",marginBottom:"80px"},notFound:{textAlign:"center",margin:"70px"},notFoundMsg:{marginTop:"20px",marginBottom:"20px"}}})),rt=Object(Je.a)({overrides:{MuiTimelineItem:{missingOppositeContent:{"&:before":{display:"none"}}}}}),ot=function(){var e=Object(a.useState)([]),t=Object(N.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(N.a)(r,2),s=o[0],i=o[1],j=Object(a.useState)(1),d=Object(N.a)(j,2),b=d[0],p=d[1],O=Object(a.useState)(null),x=Object(N.a)(O,2),h=x[0],g=x[1],f=Object(a.useState)(1),v=Object(N.a)(f,2),y=v[0],w=v[1],C=Object(a.useState)(null),S=Object(N.a)(C,2),W=S[0],_=S[1],I=Object(a.useState)(!0),B=Object(N.a)(I,2),A=B[0],E=B[1],R=Object(a.useState)(0),M=Object(N.a)(R,2),U=M[0],L=M[1],T=ct();Object(a.useEffect)((function(){q(b),H(y)}),[b,y]);var q=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.getRedeemHistory(t);case 3:n=e.sent,a=n.data,c(a.data),p(a.current_page),g(a.last_page),E(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),E(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.getPointsHistory(t);case 3:n=e.sent,a=n.data,i(a.data),w(a.current_page),_(a.last_page),E(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),E(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(se,{}),Object(k.jsx)(V,{open:A}),Object(k.jsxs)("div",{children:[Object(k.jsxs)(Ke.a,{value:U,onChange:function(e,t){return L(t)},centered:!0,children:[Object(k.jsx)(Qe.a,{label:"Pontua\xe7\xf5es"}),Object(k.jsx)(Qe.a,{label:"Resgates"})]}),Object(k.jsx)(Ce.a,{}),A||Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{role:"tabpanel",hidden:0!==U,id:"full-width-tabpanel-".concat(0),children:0===U&&Object(k.jsx)("div",{children:s.length>0?Object(k.jsxs)("div",{children:[Object(k.jsx)(Xe.a,{align:"left",children:s.map((function(e){return Object(k.jsx)(Ge.a,{theme:rt,children:Object(k.jsxs)(Ze.a,{children:[Object(k.jsxs)($e.a,{children:[Object(k.jsx)(et.a,{color:"primary"}),Object(k.jsx)(tt.a,{})]}),Object(k.jsxs)(nt.a,{children:[Object(k.jsxs)(F.a,{variant:"outlined",elevation:3,className:T.paper,children:[Object(k.jsx)(P.a,{variant:"h6",component:"h2",children:e.client}),Object(k.jsxs)(P.a,{variant:"body1",color:"textSecondary",children:[Object(k.jsxs)("span",{style:{marginRight:"15px"},children:["Pontos: ",e.amount]}),Object(k.jsxs)("span",{children:["Ref: ",e.transaction]})]})]}),Object(k.jsx)(P.a,{variant:"body2",color:"textSecondary",children:ze()(e.created_at).format("DD/MM/YYYY - HH:mm")})]})]})},e.id)}))}),Object(k.jsx)(at.a,{className:T.pagination,page:y,count:W,color:"primary",onChange:function(e,t){H(t)}})]}):Object(k.jsx)("div",{className:T.notFound,children:Object(k.jsxs)(D.a,{maxWidth:"lg",children:[Object(k.jsx)("img",{src:fe,width:"250",alt:"void"}),Object(k.jsx)(P.a,{variant:"h6",className:T.notFoundMsg,children:"Sem registro de pontua\xe7\xe3o"})]})})})}),Object(k.jsx)("div",{role:"tabpanel",hidden:1!==U,id:"full-width-tabpanel-".concat(1),children:1===U&&Object(k.jsx)("div",{children:n.length>0?Object(k.jsxs)("div",{children:[Object(k.jsx)(Xe.a,{align:"left",children:n.map((function(e){return Object(k.jsx)(Ge.a,{theme:rt,children:Object(k.jsxs)(Ze.a,{children:[Object(k.jsxs)($e.a,{children:[Object(k.jsx)(et.a,{color:"secondary"}),Object(k.jsx)(tt.a,{})]}),Object(k.jsxs)(nt.a,{children:[Object(k.jsxs)(F.a,{variant:"outlined",elevation:3,className:T.paper,children:[Object(k.jsx)(P.a,{variant:"h6",component:"h2",children:e.client}),Object(k.jsx)(P.a,{children:e.product}),Object(k.jsxs)(P.a,{variant:"body1",color:"textSecondary",children:["Pontos: ",e.amount]})]}),Object(k.jsx)(P.a,{variant:"body2",color:"textSecondary",children:ze()(e.created_at).format("DD/MM/YYYY - HH:mm")})]})]})},e.id)}))}),Object(k.jsx)(at.a,{className:T.pagination,page:b,count:h,color:"secondary",onChange:function(e,t){q(t)}})]}):Object(k.jsx)("div",{className:T.notFound,children:Object(k.jsxs)(D.a,{maxWidth:"lg",children:[Object(k.jsx)("img",{src:fe,width:"250",alt:"void"}),Object(k.jsx)(P.a,{variant:"h6",className:T.notFoundMsg,children:"Sem registro de pontua\xe7\xe3o"})]})})})})]})]}),Object(k.jsx)(de,{})]})},st=Object(E.a)((function(e){return{button:{color:e.palette.common.white,backgroundColor:We.a[400],"&:hover":{backgroundColor:We.a[500]}},gridContainer:{marginBottom:"30px"},paper:{padding:"10px"},imageContainer:{display:"flex",padding:"15px"},productPicture:{margin:"auto",border:"2px solid #bdbdbd",width:e.spacing(25),height:e.spacing(25)},header:{marginBottom:"20px"}}})),it=function(){var e=Object(a.useState)(""),t=Object(N.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),o=Object(N.a)(r,2),s=o[0],i=o[1],j=Object(a.useState)(!1),d=Object(N.a)(j,2),b=d[0],p=d[1],O=Object(a.useState)(!1),x=Object(N.a)(O,2),h=x[0],m=x[1],g=Object(a.useState)(""),f=Object(N.a)(g,2),y=f[0],w=f[1],C=st(),S=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=18;break}return p(!0),e.prev=2,e.next=5,v.getVoucher(n);case 5:a=e.sent,c=a.data,i(c),p(!1),c||(w("Cupom n\xe3o encontrado."),m(!0)),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),p(!1),w("Ocorreu um erro, tente novamente."),m(!0);case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),i(null),t={id:n},e.prev=3,e.next=6,v.completeVoucher(t);case 6:p(!1),w("Resgate concluido com sucesso."),m(!0),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),p(!1),w("N\xe3o foi possivel efetuar o resgate."),m(!0);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(se,{}),Object(k.jsx)(V,{open:b}),Object(k.jsx)(me,{open:h,close:function(){return m(!1)},text:y}),Object(k.jsxs)(D.a,{maxWidth:"lg",children:[Object(k.jsxs)("div",{className:C.header,children:[Object(k.jsx)(P.a,{variant:"h5",children:"Resgate"}),Object(k.jsx)(Ce.a,{})]}),Object(k.jsxs)(I.a,{className:C.gridContainer,container:!0,spacing:3,direction:"column",justifyContent:"center",children:[Object(k.jsx)(I.a,{item:!0,className:C.gridContainer,xs:12,children:Object(k.jsx)(F.a,{variant:"outlined",className:C.paper,children:Object(k.jsx)(W.a,{fullWidth:!0,variant:"outlined",label:"C\xf3digo de resgate",margin:"normal",type:"text",value:n,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){return S(e)}})})}),s&&Object(k.jsx)(I.a,{item:!0,xs:12,children:Object(k.jsxs)(F.a,{variant:"outlined",children:[Object(k.jsx)("div",{className:C.imageContainer,children:Object(k.jsx)(J.a,{className:C.productPicture,src:"https://api.fidelija.com.br/"+s.product.image})}),Object(k.jsxs)(X.a,{children:[Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(Re.a,{})})}),Object(k.jsx)(ee.a,{primary:"Produto",secondary:s.product.name})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(Me.a,{})})}),Object(k.jsx)(ee.a,{primary:"Estoque",secondary:s.product.stock})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(re.a,{})})}),Object(k.jsx)(ee.a,{primary:"Valor em pontos",secondary:s.product.cost})]}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(Se.a,{children:Object(k.jsx)(J.a,{children:Object(k.jsx)(Ue.a,{})})}),Object(k.jsx)(ee.a,{primary:"Validade",secondary:s.limit_date})]})]}),Object(k.jsx)("div",{style:{padding:"10px"},children:Object(k.jsx)(_.a,{className:C.button,fullWidth:!0,variant:"contained",onClick:function(){return B()},children:"Confirmar"})})]})})]})]}),Object(k.jsx)(de,{})]})},jt=n(109),lt=n.n(jt),ut=Object(E.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},paper:{padding:"25px",marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},logo:{margin:e.spacing(4),width:"180px"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),dt=function(){var e=Object(a.useState)(""),t=Object(N.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(N.a)(r,2),s=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(N.a)(d,2),p=b[0],x=b[1],h=Object(a.useState)(!1),m=Object(N.a)(h,2),g=m[0],f=m[1],v=Object(a.useState)(!1),y=Object(N.a)(v,2),w=y[0],C=y[1],S=Object(a.useState)(""),E=Object(N.a)(S,2),R=E[0],M=E[1],U=ut(),L=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,t={nome:s,email:n},e.next=5,O.recoverPassword(t);case 5:x(!1),j(""),c(""),M("Verifique a caixa de entrada de seu email."),f(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),x(!1),M("N\xe3o foi possivel enviar a redefini\xe7\xe3o de senha."),C(!0);case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(V,{open:p}),Object(k.jsx)(q,{toggleSnack:g||w,time:w?4500:3500,onClose:function(){C(!1),f(!1)},color:g?"success":"warning",children:R}),Object(k.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(k.jsxs)(F.a,{variant:"outlined",className:U.paper,children:[Object(k.jsx)(J.a,{className:U.avatar,children:Object(k.jsx)(lt.a,{})}),Object(k.jsx)(P.a,{component:"h1",variant:"h5",children:"Recuperar senha"}),Object(k.jsxs)("div",{className:U.form,children:[Object(k.jsx)(W.a,{fullWidth:!0,margin:"normal",required:!0,label:"Nome",type:"text",variant:"outlined",value:s,onChange:function(e){return j(e.target.value)}}),Object(k.jsx)(W.a,{fullWidth:!0,margin:"normal",required:!0,label:"Email",type:"text",variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),Object(k.jsx)(_.a,{fullWidth:!0,variant:"contained",color:"primary",className:U.submit,onClick:function(){return L()},children:"Solicitar nova de senha"}),Object(k.jsx)(I.a,{container:!0,children:Object(k.jsx)(I.a,{item:!0,xs:!0,children:Object(k.jsx)(B.a,{component:i.b,to:"/",variant:"body2",children:"Voltar para o login"})})})]})]}),Object(k.jsx)(A.a,{mt:8,children:Object(k.jsxs)(P.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(k.jsx)(B.a,{color:"inherit",href:"https://fidelija.com.br/",children:"Fidelij\xe1"})," ",(new Date).getFullYear(),"."]})})]})]})},bt=function(){return Object(k.jsx)(s.a,{to:"/"})},pt=function(){return Object(k.jsx)(i.a,{children:Object(k.jsxs)(s.d,{children:[O.isAuthenticated()?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(S,{path:"/",exact:!0,component:ot}),Object(k.jsx)(S,{path:"/user/search/:id",component:Ae}),Object(k.jsx)(S,{path:"/voucher/:id",component:Ve}),Object(k.jsx)(S,{path:"/redeem",component:it}),Object(k.jsx)(S,{path:"/reader",component:He}),Object(k.jsx)(S,{path:"/point-user",component:Ie})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(C,{path:"/",exact:!0,component:ye}),Object(k.jsx)(C,{path:"/recover",component:dt})]}),Object(k.jsx)(s.b,{path:"*",exact:!0,component:bt})]})})};var Ot=function(){return Object(k.jsxs)("div",{style:{overflow:"hidden",position:"relative"},children:[Object(k.jsx)(o.a,{}),Object(k.jsx)(pt,{})]})};r.a.render(Object(k.jsx)(Ot,{}),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.2181d451.chunk.js.map